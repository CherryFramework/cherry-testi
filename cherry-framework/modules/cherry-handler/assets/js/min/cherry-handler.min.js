!function(e,a){"use strict";a.utilites.namespace("CherryAjaxHandler"),a.CherryAjaxHandler=function(n){var t=this,r={handlerId:"",cache:!1,processData:!0,url:"",beforeSendCallback:function(){},errorCallback:function(){},successCallback:function(){},completeCallback:function(){}};return n&&e.extend(r,n),window[r.handlerId]?(t.handlerSettings=window[r.handlerId]||{},t.ajaxRequest=null,t.ajaxProcessing=!1,t.data={action:t.handlerSettings.action,nonce:t.handlerSettings.nonce},""===r.url&&(r.url="false"===t.handlerSettings.is_public?window.ajaxurl:window.cherryHandlerAjaxUrl.ajax_url),t.send=function(){t.ajaxProcessing&&a.cherryHandlerUtils.noticeCreate("error-notice",t.handlerSettings.sys_messages.wait_processing,t.handlerSettings.is_public),t.ajaxProcessing=!0,t.ajaxRequest=jQuery.ajax({type:t.handlerSettings.type,url:r.url,data:t.data,cache:r.cache,dataType:t.handlerSettings.data_type,processData:r.processData,beforeSend:function(e,a){null!==t.ajaxRequest&&t.ajaxRequest.abort(),r.beforeSendCallback&&"function"==typeof r.beforeSendCallback&&r.beforeSendCallback(e,a)},error:function(e,a,n){r.errorCallback&&"function"==typeof r.errorCallback&&r.errorCallback(e,a,n)},success:function(e,n,i){t.ajaxProcessing=!1,r.successCallback&&"function"==typeof r.successCallback&&r.successCallback(e,n,i),a.cherryHandlerUtils.noticeCreate(e.type,e.message,t.handlerSettings.is_public)},complete:function(e,a){r.completeCallback&&"function"==typeof r.completeCallback&&r.completeCallback(e,a)}})},t.sendData=function(e){var a=e||{};t.data={action:t.handlerSettings.action,nonce:t.handlerSettings.nonce,data:a},t.send()},void(t.sendFormData=function(n){var r,i=e(n);r=a.cherryHandlerUtils.serializeObject(i),t.sendData(r)})):(window.console&&window.console.warn("Handler id not found"),!1)},a.utilites.namespace("cherryHandlerUtils"),a.cherryHandlerUtils={noticeCreate:function(a,n,t){function r(){var a=100;e(".cherry-handler-notice").each(function(){e(this).css({top:a}),a+=e(this).outerHeight(!0)})}var i,s,c=0,o=t||!1;return n&&"true"!==o?(i=e('<div class="cherry-handler-notice '+a+'"><span class="dashicons"></span><div class="inner">'+n+"</div></div>"),e("body").prepend(i),r(),c=-1*(i.outerWidth(!0)+10),i.css({right:c}),s=setTimeout(function(){i.css({right:10}).addClass("show-state")},100),s=setTimeout(function(){c=-1*(i.outerWidth(!0)+10),i.css({right:c}).removeClass("show-state")},4e3),void(s=setTimeout(function(){i.remove(),clearTimeout(s)},4500))):!1},serializeObject:function(a){var n=this,t={},r={},i={validate:/^[a-zA-Z][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/};return this.build=function(e,a,n){return e[a]=n,e},this.push_counter=function(e){return void 0===r[e]&&(r[e]=0),r[e]++},e.each(a.serializeArray(),function(){var a,r,s,c;if(i.validate.test(this.name)){for(r=this.name.match(i.key),s=this.value,c=this.name;void 0!==(a=r.pop());)c=c.replace(new RegExp("\\["+a+"\\]$"),""),a.match(i.push)?s=n.build([],n.push_counter(c),s):a.match(i.fixed)?s=n.build([],a,s):a.match(i.named)&&(s=n.build({},a,s));t=e.extend(!0,t,s)}}),t}}}(jQuery,window.CherryJsCore);